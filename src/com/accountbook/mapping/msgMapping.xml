<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.accountbook.dao.MessageDao" >
  <resultMap id="map" type="com.accountbook.modle.Message" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="from_id" property="fromId" jdbcType="VARCHAR" />
    <result column="to_id" property="toId" jdbcType="VARCHAR" />
    <result column="type" property="type" jdbcType="TINYINT" />
    <result column="content" property="content" jdbcType="VARCHAR" />
    <result column="time" property="timeMiles" jdbcType="INTEGER" />
    <result column="status" property="status" jdbcType="TINYINT" />
  </resultMap>
  
  <sql id="colums" >
    id,from_id,to_id,type,content,time,status
  </sql>
	
	<select id="queryById" parameterType="String" resultMap="map">
		SELECT * FROM user WHERE id = #{id};
	</select>
	
	<select id="queryUnreadCount" parameterType="String" resultType="integer">
		SELECT * FROM user WHERE id = #{id} and status=0;
	</select>
	
	<!-- 插入 -->
	<insert id="insert" parameterType="com.accountbook.modle.Message">
		insert into message(<include refid="colums"></include>)
		values(null,#{fromId},#{toId},#{type},#{content},#{timeMiles},#{status})
	</insert>
	
	<!-- 更新 -->
	<update id="updateStatus" parameterType="integer">
		update user set status=#{status} where id=#{id}
	</update>
</mapper>