#查询聊天信息,最近的10条
SELECT * FROM 
(SELECT * FROM message WHERE TYPE=3 AND
		((from_id='oCBrx0FreB-L8pIQM5_RYDGoWOJJ' AND to_id='oCBrx0FreB-L8pIQM5_RYDGoWOKQ') OR
		(from_id='oCBrx0FreB-L8pIQM5_RYDGoWOKQ' AND to_id='oCBrx0FreB-L8pIQM5_RYDGoWOJJ')) ORDER BY TIME DESC LIMIT 0,10)AS a
		ORDER BY TIME ASC



#查询聊天列表(最后一条消息)
SELECT * FROM message WHERE id IN(
SELECT MAX(id) FROM (
(SELECT * FROM message WHERE  from_id='oCBrx0FreB-L8pIQM5_RYDGoWOKQ' AND TYPE=3 AND state!=2
UNION
SELECT * FROM message WHERE  to_id='oCBrx0FreB-L8pIQM5_RYDGoWOKQ' AND TYPE=3 AND state!=2)

)AS b GROUP BY b.from_id,b.to_id
)

 UNION 
 
 SELECT * FROM ( 
 SELECT * FROM message WHERE to_id='oCBrx0FreB-L8pIQM5_RYDGoWOKQ' AND (TYPE=1 OR TYPE=2)ORDER BY TIME DESC LIMIT 0,1) AS b
 
 ORDER BY TIME DESC
 
 
 
 #查询账单相关的消息
 SELECT * FROM message WHERE 
content LIKE '[Create]:vKzGZBfU67lSXhkkbt7GLg==%' OR 
content LIKE '[CreateInner]:vKzGZBfU67lSXhkkbt7GLg==%' OR
content LIKE '[Settle]:vKzGZBfU67lSXhkkbt7GLg==%' 
 